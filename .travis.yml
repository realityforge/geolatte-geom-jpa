# Lock down dist to ensure that builds run on a distribution that supports oraclejdk8
dist: trusty
language: ruby
jdk:
  - oraclejdk8
rvm:
  - 2.7.2
services:
  - postgresql
addons:
  postgresql: 9.6
  apt:
    packages:
      - postgresql-9.6-postgis-2.3
before_script:
  - psql -U postgres -c "create extension postgis"
install:
  - rvm install ruby-2.7.2
  - rvm use 2.7.2
  - bundle install
script: buildr clean package
git:
  depth: 10
